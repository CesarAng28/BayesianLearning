"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ViewContainer = exports.DATATIP_ACTIONS = void 0;
const HTMLView_1 = require("./HTMLView");
const SnippetView_1 = require("./SnippetView");
const ReactView_1 = require("./ReactView");
const React = __importStar(require("react"));
const react_dom_1 = __importDefault(require("react-dom"));
exports.DATATIP_ACTIONS = Object.freeze({
    PIN: "PIN",
    CLOSE: "CLOSE",
});
const IconsForAction = {
    [exports.DATATIP_ACTIONS.PIN]: "pin",
    [exports.DATATIP_ACTIONS.CLOSE]: "x",
};
class ViewContainer extends React.Component {
    constructor(props) {
        super(props);
        this.children = [];
        this.updateChildren();
        this.rootElement = document.createElement("div");
        const glowClass = atom.config.get("atom-ide-datatip.glowOnHover") ? "datatip-glow" : "";
        this.classNames = `${String(props.className)} datatip-element ${glowClass}`;
    }
    render() {
        this.actionButton = this.ActionClick(this.props.action, this.props.actionTitle);
        return (React.createElement("div", Object.assign({ className: this.classNames }, this.props.onMouseDown, this.props.onClickCapture),
            this.children,
            this.actionButton));
    }
    get element() {
        return react_dom_1.default.render(this.render(), this.rootElement);
    }
    updateChildren() {
        if (this.props.component) {
            const { element, containerClassName, contentClassName } = this.props.component;
            this.children.push(React.createElement(ReactView_1.ReactView, { component: element, containerClassName: containerClassName, contentClassName: contentClassName }));
        }
        if (this.props.snippet) {
            const { element, containerClassName, contentClassName } = this.props.snippet;
            this.children.push(React.createElement(SnippetView_1.SnippetView, { snippet: element, containerClassName: containerClassName, contentClassName: contentClassName }));
        }
        if (this.props.html) {
            const { element, containerClassName, contentClassName } = this.props.html;
            this.children.push(React.createElement(HTMLView_1.HTMLView, { html: element, containerClassName: containerClassName, contentClassName: contentClassName }));
        }
    }
    ActionClick(action, actionTitle) {
        let actionButton = undefined;
        if (action != null && IconsForAction[action] != null) {
            const actionIcon = IconsForAction[action];
            actionButton = (React.createElement("div", { className: `datatip-pin-button icon-${actionIcon}`, onClick: (event) => {
                    this.props.onActionClick();
                }, title: actionTitle }));
        }
        return actionButton;
    }
    async destroy() {
        return;
    }
}
exports.ViewContainer = ViewContainer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlld0NvbnRhaW5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy1jb21tb25zLXVpL2Zsb2F0LXBhbmUvVmlld0NvbnRhaW5lci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHlDQUFxQztBQUNyQywrQ0FBMkM7QUFDM0MsMkNBQXVDO0FBRXZDLDZDQUE4QjtBQUM5QiwwREFBZ0M7QUFHbkIsUUFBQSxlQUFlLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUMzQyxHQUFHLEVBQUUsS0FBSztJQUNWLEtBQUssRUFBRSxPQUFPO0NBQ2YsQ0FBQyxDQUFBO0FBRUYsTUFBTSxjQUFjLEdBQUc7SUFDckIsQ0FBQyx1QkFBZSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUs7SUFDNUIsQ0FBQyx1QkFBZSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUc7Q0FDN0IsQ0FBQTtBQW9CRCxNQUFhLGFBQWMsU0FBUSxLQUFLLENBQUMsU0FBdUI7SUFPOUQsWUFBWSxLQUFZO1FBQ3RCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUNaLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFBO1FBQ2xCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQTtRQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDaEQsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7UUFDdkYsSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLG9CQUFvQixTQUFTLEVBQUUsQ0FBQTtJQUM3RSxDQUFDO0lBTUQsTUFBTTtRQUNKLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQy9FLE9BQU8sQ0FDTCwyQ0FBSyxTQUFTLEVBQUUsSUFBSSxDQUFDLFVBQVUsSUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWM7WUFDdkYsSUFBSSxDQUFDLFFBQVE7WUFDYixJQUFJLENBQUMsWUFBWSxDQUNkLENBQ1AsQ0FBQTtJQUNILENBQUM7SUFFRCxJQUFJLE9BQU87UUFDVCxPQUFPLG1CQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDekQsQ0FBQztJQU1ELGNBQWM7UUFDWixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFO1lBQ3hCLE1BQU0sRUFBRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsZ0JBQWdCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQTtZQUM5RSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDaEIsb0JBQUMscUJBQVMsSUFBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLGdCQUFnQixHQUFJLENBQzlHLENBQUE7U0FDRjtRQUNELElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7WUFDdEIsTUFBTSxFQUFFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1lBQzVFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUNoQixvQkFBQyx5QkFBVyxJQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsa0JBQWtCLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLEdBQUksQ0FDOUcsQ0FBQTtTQUNGO1FBQ0QsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRTtZQUNuQixNQUFNLEVBQUUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUE7WUFDekUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQ2hCLG9CQUFDLG1CQUFRLElBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsR0FBSSxDQUN4RyxDQUFBO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsV0FBVyxDQUFDLE1BQWMsRUFBRSxXQUFtQjtRQUM3QyxJQUFJLFlBQVksR0FBRyxTQUFTLENBQUE7UUFDNUIsSUFBSSxNQUFNLElBQUksSUFBSSxJQUFJLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLEVBQUU7WUFDcEQsTUFBTSxVQUFVLEdBQUcsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQ3pDLFlBQVksR0FBRyxDQUNiLDZCQUNFLFNBQVMsRUFBRSwyQkFBMkIsVUFBVSxFQUFFLEVBQ2xELE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO29CQUNqQixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFBO2dCQUM1QixDQUFDLEVBQ0QsS0FBSyxFQUFFLFdBQVcsR0FDbEIsQ0FDSCxDQUFBO1NBQ0Y7UUFDRCxPQUFPLFlBQVksQ0FBQTtJQUNyQixDQUFDO0lBRUQsS0FBSyxDQUFDLE9BQU87UUFDWCxPQUFNO0lBQ1IsQ0FBQztDQUNGO0FBL0VELHNDQStFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhUTUxWaWV3IH0gZnJvbSBcIi4vSFRNTFZpZXdcIlxyXG5pbXBvcnQgeyBTbmlwcGV0VmlldyB9IGZyb20gXCIuL1NuaXBwZXRWaWV3XCJcclxuaW1wb3J0IHsgUmVhY3RWaWV3IH0gZnJvbSBcIi4vUmVhY3RWaWV3XCJcclxuaW1wb3J0IHR5cGUgeyBSZWFjdEVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIlxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIlxyXG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiXHJcbmltcG9ydCB0eXBlIHsgRGF0YXRpcCB9IGZyb20gXCIuLi8uLi90eXBlcy1wYWNrYWdlcy9tYWluLmRcIlxyXG5cclxuZXhwb3J0IGNvbnN0IERBVEFUSVBfQUNUSU9OUyA9IE9iamVjdC5mcmVlemUoe1xyXG4gIFBJTjogXCJQSU5cIixcclxuICBDTE9TRTogXCJDTE9TRVwiLFxyXG59KVxyXG5cclxuY29uc3QgSWNvbnNGb3JBY3Rpb24gPSB7XHJcbiAgW0RBVEFUSVBfQUNUSU9OUy5QSU5dOiBcInBpblwiLFxyXG4gIFtEQVRBVElQX0FDVElPTlMuQ0xPU0VdOiBcInhcIixcclxufVxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb21wb25lbnQ/OiB7IGVsZW1lbnQ6ICgpID0+IFJlYWN0RWxlbWVudDsgY29udGFpbmVyQ2xhc3NOYW1lOiBzdHJpbmc7IGNvbnRlbnRDbGFzc05hbWU6IHN0cmluZyB9XHJcbiAgaHRtbD86IHsgZWxlbWVudDogc3RyaW5nOyBjb250YWluZXJDbGFzc05hbWU6IHN0cmluZzsgY29udGVudENsYXNzTmFtZTogc3RyaW5nIH1cclxuICBzbmlwcGV0PzogeyBlbGVtZW50OiBzdHJpbmc7IGNvbnRhaW5lckNsYXNzTmFtZTogc3RyaW5nOyBjb250ZW50Q2xhc3NOYW1lOiBzdHJpbmcgfVxyXG4gIGFjdGlvbjogc3RyaW5nXHJcbiAgYWN0aW9uVGl0bGU6IHN0cmluZ1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xyXG4gIGRhdGF0aXA6IERhdGF0aXBcclxuICBvbkFjdGlvbkNsaWNrOiBGdW5jdGlvblxyXG4gIG9uTW91c2VEb3duOiBGdW5jdGlvblxyXG4gIG9uQ2xpY2tDYXB0dXJlOiBGdW5jdGlvblxyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge31cclxuXHJcbi8qKlxyXG4gKiBhbiBldGNoIGNvbXBvbmVudCBmb3IgYSBkZWNvcmF0aW9uIHBhbmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWaWV3Q29udGFpbmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gIGFjdGlvbkJ1dHRvbj86IEpTWC5FbGVtZW50XHJcbiAgY2xhc3NOYW1lczogc3RyaW5nXHJcbiAgY2hpbGRyZW46IEFycmF5PEpTWC5FbGVtZW50PlxyXG5cclxuICByb290RWxlbWVudDogSFRNTEVsZW1lbnRcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbXVxyXG4gICAgdGhpcy51cGRhdGVDaGlsZHJlbigpXHJcbiAgICB0aGlzLnJvb3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgY29uc3QgZ2xvd0NsYXNzID0gYXRvbS5jb25maWcuZ2V0KFwiYXRvbS1pZGUtZGF0YXRpcC5nbG93T25Ib3ZlclwiKSA/IFwiZGF0YXRpcC1nbG93XCIgOiBcIlwiXHJcbiAgICB0aGlzLmNsYXNzTmFtZXMgPSBgJHtTdHJpbmcocHJvcHMuY2xhc3NOYW1lKX0gZGF0YXRpcC1lbGVtZW50ICR7Z2xvd0NsYXNzfWBcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJlbmRlcnMgdGhlIGRhdGEgdGlwIHZpZXcgY29tcG9uZW50XHJcbiAgICogQHJldHVybiB0aGUgZGF0YSB0aXAgdmlldyBlbGVtZW50XHJcbiAgICovXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgdGhpcy5hY3Rpb25CdXR0b24gPSB0aGlzLkFjdGlvbkNsaWNrKHRoaXMucHJvcHMuYWN0aW9uLCB0aGlzLnByb3BzLmFjdGlvblRpdGxlKVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMuY2xhc3NOYW1lc30gey4uLnRoaXMucHJvcHMub25Nb3VzZURvd259IHsuLi50aGlzLnByb3BzLm9uQ2xpY2tDYXB0dXJlfT5cclxuICAgICAgICB7dGhpcy5jaGlsZHJlbn1cclxuICAgICAgICB7dGhpcy5hY3Rpb25CdXR0b259XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0IGVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gUmVhY3RET00ucmVuZGVyKHRoaXMucmVuZGVyKCksIHRoaXMucm9vdEVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBpbnRlcm5hbCBoZWxwZXIgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc3RydWN0dXJlIG9mIHRoZSBkYXRhIHRpcCB2aWV3XHJcbiAgICogdG8gYmUgcmVuZGVyZWRcclxuICAgKi9cclxuICB1cGRhdGVDaGlsZHJlbigpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLmNvbXBvbmVudCkge1xyXG4gICAgICBjb25zdCB7IGVsZW1lbnQsIGNvbnRhaW5lckNsYXNzTmFtZSwgY29udGVudENsYXNzTmFtZSB9ID0gdGhpcy5wcm9wcy5jb21wb25lbnRcclxuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKFxyXG4gICAgICAgIDxSZWFjdFZpZXcgY29tcG9uZW50PXtlbGVtZW50fSBjb250YWluZXJDbGFzc05hbWU9e2NvbnRhaW5lckNsYXNzTmFtZX0gY29udGVudENsYXNzTmFtZT17Y29udGVudENsYXNzTmFtZX0gLz5cclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucHJvcHMuc25pcHBldCkge1xyXG4gICAgICBjb25zdCB7IGVsZW1lbnQsIGNvbnRhaW5lckNsYXNzTmFtZSwgY29udGVudENsYXNzTmFtZSB9ID0gdGhpcy5wcm9wcy5zbmlwcGV0XHJcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChcclxuICAgICAgICA8U25pcHBldFZpZXcgc25pcHBldD17ZWxlbWVudH0gY29udGFpbmVyQ2xhc3NOYW1lPXtjb250YWluZXJDbGFzc05hbWV9IGNvbnRlbnRDbGFzc05hbWU9e2NvbnRlbnRDbGFzc05hbWV9IC8+XHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByb3BzLmh0bWwpIHtcclxuICAgICAgY29uc3QgeyBlbGVtZW50LCBjb250YWluZXJDbGFzc05hbWUsIGNvbnRlbnRDbGFzc05hbWUgfSA9IHRoaXMucHJvcHMuaHRtbFxyXG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goXHJcbiAgICAgICAgPEhUTUxWaWV3IGh0bWw9e2VsZW1lbnR9IGNvbnRhaW5lckNsYXNzTmFtZT17Y29udGFpbmVyQ2xhc3NOYW1lfSBjb250ZW50Q2xhc3NOYW1lPXtjb250ZW50Q2xhc3NOYW1lfSAvPlxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBBY3Rpb25DbGljayhhY3Rpb246IHN0cmluZywgYWN0aW9uVGl0bGU6IHN0cmluZykge1xyXG4gICAgbGV0IGFjdGlvbkJ1dHRvbiA9IHVuZGVmaW5lZFxyXG4gICAgaWYgKGFjdGlvbiAhPSBudWxsICYmIEljb25zRm9yQWN0aW9uW2FjdGlvbl0gIT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBhY3Rpb25JY29uID0gSWNvbnNGb3JBY3Rpb25bYWN0aW9uXVxyXG4gICAgICBhY3Rpb25CdXR0b24gPSAoXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtgZGF0YXRpcC1waW4tYnV0dG9uIGljb24tJHthY3Rpb25JY29ufWB9XHJcbiAgICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGlvbkNsaWNrKClcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICB0aXRsZT17YWN0aW9uVGl0bGV9XHJcbiAgICAgICAgLz5cclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFjdGlvbkJ1dHRvblxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVzdHJveSgpIHtcclxuICAgIHJldHVybiAvLyB0aGlzLmNvbXBvbmVudFdpbGxVbm1vdW50KClcclxuICB9XHJcbn1cclxuIl19